# å‘ç°æ¨¡å¼åˆ†ææ–‡æ¡£

æœ¬æ–‡æ¡£åˆ†æäº† `discovering.py` è„šæœ¬ä¸­å®ç°çš„å„ç§å‘ç°å’Œåˆ†ç±»æ¨¡å¼ï¼Œè¯¦ç»†è¯´æ˜äº†æ¯ä¸ªæ¨¡å¼çš„åŠŸèƒ½ã€ç”¨é€”å’Œä½¿ç”¨æ–¹æ³•ã€‚

> **ğŸš€ æ›´æ–°è¯´æ˜**: æœ¬æ–‡æ¡£å·²å…¨é¢æ›´æ–°ï¼Œç°åœ¨æ¶µç›–æ‰€æœ‰19ç§å‘ç°æ¨¡å¼ï¼Œå¹¶è¯¦ç»†è¯´æ˜äº†å¦‚ä½•é€šè¿‡ `run_discovery.sh` å’Œ `config.yaml` è¿›è¡Œç»Ÿä¸€ç®¡ç†å’Œå¿«é€Ÿåˆ‡æ¢ã€‚

## ğŸ”§ **ç»Ÿä¸€ç®¡ç†ç³»ç»Ÿ**

### run_discovery.sh + config.yaml ç»Ÿä¸€ç®¡ç†

ä¸ºäº†ç®€åŒ–19ç§å‘ç°æ¨¡å¼çš„ä½¿ç”¨ï¼Œç³»ç»Ÿç°åœ¨æä¾›ç»Ÿä¸€çš„ç®¡ç†æ–¹å¼ï¼š

#### ğŸ¯ **ä¸€é”®åˆ‡æ¢æ¨¡å¼**
```bash
# ä¿®æ”¹ config.yaml ä¸­çš„ discovery_mode
sed -i 's/discovery_mode: ".*"/discovery_mode: "fast_slow_infer"/' config.yaml
bash run_discovery.sh
```

#### ğŸ“‹ **config.yaml é…ç½®å‚æ•°**
```yaml
modes:
  # æ”¯æŒ19ç§å‘ç°æ¨¡å¼ï¼Œåˆ†ä¸º5å¤§ç±»ï¼š
  # 1. ä¼ ç»ŸVQAæµç¨‹: identify, howto, describe, guess, postprocess
  # 2. å¿«æ…¢æ€è€ƒç³»ç»Ÿ: build_knowledge_base, classify, evaluate, fastonly, slowonly, fast_slow  
  # 3. åˆ†ç¦»å¼æ¨ç†åˆ†ç±»: fast_slow_infer, fast_slow_classify
  # 4. å¹¶è¡Œåˆ†ç±»: fast_classify, slow_classify, terminal_decision
  # 5. å¤šæ¨¡æ€å¢å¼º: fast_classify_enhanced, slow_classify_enhanced, terminal_decision_enhanced
  discovery_mode: "build_knowledge_base"  # é€‰æ‹©è¦è¿è¡Œçš„æ¨¡å¼
```

#### ğŸ”„ **è‡ªåŠ¨å‚æ•°é€‚é…**
`run_discovery.sh` ä¼šæ ¹æ®é€‰æ‹©çš„æ¨¡å¼è‡ªåŠ¨ï¼š
- æ£€æŸ¥ä¾èµ–å…³ç³»ï¼ˆå¦‚æ˜¯å¦éœ€è¦çŸ¥è¯†åº“ã€æ¨ç†ç»“æœç­‰ï¼‰
- åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æ„
- é€‰æ‹©æ­£ç¡®çš„å‘½ä»¤è¡Œå‚æ•°ç»„åˆ
- æä¾›è¯¦ç»†çš„é”™è¯¯æç¤ºå’Œä½¿ç”¨æŒ‡å¯¼

#### ğŸ’¡ **ä½¿ç”¨ä¼˜åŠ¿**
- **ç»Ÿä¸€å…¥å£**: æ‰€æœ‰æ¨¡å¼éƒ½é€šè¿‡åŒä¸€ä¸ªè„šæœ¬å¯åŠ¨
- **å‚æ•°ä¸€è‡´**: æ‰€æœ‰é…ç½®éƒ½åœ¨config.yamlä¸­ç»Ÿä¸€ç®¡ç†
- **é”™è¯¯æ£€æŸ¥**: è‡ªåŠ¨æ£€æŸ¥æ¨¡å¼ä¾èµ–å’Œæ–‡ä»¶çŠ¶æ€
- **æ—¥å¿—ç®¡ç†**: ç»Ÿä¸€çš„æ—¥å¿—å‘½åå’Œå­˜å‚¨è§„åˆ™
- **å¿«é€Ÿåˆ‡æ¢**: åªéœ€ä¿®æ”¹ä¸€ä¸ªå‚æ•°å³å¯åˆ‡æ¢æ¨¡å¼

## ä»£ç æ¦‚è¿°

`discovering.py` æ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½çš„å›¾åƒåˆ†ç±»å’Œå‘ç°ç³»ç»Ÿï¼Œæ”¯æŒä¼ ç»Ÿçš„VQAæ–¹æ³•å’Œç°ä»£çš„å¿«æ…¢æ€è€ƒç³»ç»Ÿã€‚è¯¥è„šæœ¬å®ç°äº†ä»å±æ€§å‘ç°åˆ°æœ€ç»ˆåˆ†ç±»çš„å®Œæ•´æµç¨‹ã€‚ç°åœ¨é€šè¿‡ `run_discovery.sh` æä¾›ç»Ÿä¸€çš„è¿è¡Œæ¥å£ã€‚

## ä¸»è¦åŠŸèƒ½æ¨¡å—

### 1. å·¥å…·å‡½æ•°

- **`cint2cname()`**: å°†ç±»åˆ«æ•´æ•°ç´¢å¼•è½¬æ¢ä¸ºç±»åˆ«åç§°
- **`extract_superidentify()`**: ä»ä¸ªä½“è¯†åˆ«ç»“æœä¸­æå–è¶…ç±»è¯†åˆ«ç»“æœ
- **`extract_python_list()`**: ä»æ–‡æœ¬ä¸­æå–Pythonåˆ—è¡¨æ ¼å¼çš„å†…å®¹
- **`trim_result2json()`**: ä»LLMåŸå§‹è¾“å‡ºä¸­æå–JSONæ ¼å¼å†…å®¹
- **`clean_name()`**: æ¸…ç†ç±»åˆ«åç§°ï¼Œç»Ÿä¸€æ ¼å¼
- **`extract_names()`**: ä»çŒœæµ‹çš„åç§°åˆ—è¡¨ä¸­æå–å’Œæ¸…ç†åç§°
- **`how_to_distinguish()`**: è¯¢é—®LLMå¦‚ä½•åŒºåˆ†ä¸åŒç±»åˆ«

### 2. æ ¸å¿ƒåŠŸèƒ½å‡½æ•°

#### `load_train_samples()`
- **åŠŸèƒ½**: åŠ è½½K-shotè®­ç»ƒæ ·æœ¬
- **è¾“å…¥**: é…ç½®æ–‡ä»¶ã€Kå€¼
- **è¾“å‡º**: `{category: [image_paths]}` æ ¼å¼çš„æ ·æœ¬å­—å…¸
- **ç‰¹ç‚¹**: æ”¯æŒä»JSONæ–‡ä»¶è¯»å–æˆ–ç›®å½•æ‰«æä¸¤ç§æ–¹å¼

## è¿è¡Œæ¨¡å¼è¯¦è§£

### 1. identifyæ¨¡å¼
```bash
python discovering.py --mode=identify [å…¶ä»–å‚æ•°]
```
- **åŠŸèƒ½**: è¯†åˆ«å›¾åƒçš„è¶…ç±»ï¼ˆå¦‚car, bird, flower, dog, cat, Pokemonï¼‰
- **æ ¸å¿ƒå‡½æ•°**: `main_identify()`
- **æµç¨‹**: éå†å‘ç°æ•°æ®é›†ï¼Œä½¿ç”¨VQAè¯¢é—®ä¸»è¦å¯¹è±¡ç±»åˆ«
- **è¾“å‡º**: JSONæ ¼å¼çš„è¶…ç±»è¯†åˆ«ç»“æœ

### 2. describeæ¨¡å¼
```bash
python discovering.py --mode=describe [å…¶ä»–å‚æ•°]
```
- **åŠŸèƒ½**: ä¸ºæ¯ä¸ªå±æ€§ç”ŸæˆVQAæè¿°å¹¶æ„å»ºLLMæç¤º
- **æ ¸å¿ƒå‡½æ•°**: `main_describe()`
- **æµç¨‹**: 
  1. è·å–é¢„å®šä¹‰å±æ€§åˆ—è¡¨
  2. å¯¹æ¯ä¸ªå±æ€§è°ƒç”¨VQAæ¨¡å‹ç”Ÿæˆæè¿°
  3. æ„å»ºLLMæ¨ç†æç¤º
- **è¾“å‡º**: å±æ€§æè¿°ç»“æœå’ŒLLMæç¤ºå­—å…¸

### 3. guessæ¨¡å¼
```bash
python discovering.py --mode=guess [å…¶ä»–å‚æ•°]
```
- **åŠŸèƒ½**: åŸºäºå±æ€§æè¿°æ¨ç†ç±»åˆ«åç§°
- **æ ¸å¿ƒå‡½æ•°**: `main_guess()`
- **æµç¨‹**: ä½¿ç”¨LLMå¯¹å±æ€§æè¿°è¿›è¡Œæ¨ç†ï¼Œç”Ÿæˆå¯èƒ½çš„ç±»åˆ«åç§°
- **å‚æ•°**: ä½¿ç”¨è¾ƒé«˜æ¸©åº¦(0.9)æé«˜å¤šæ ·æ€§
- **è¾“å‡º**: åŸå§‹å›å¤å’ŒJSONæ ¼å¼çš„æ¨ç†ç»“æœ

### 4. postprocessæ¨¡å¼
```bash
python discovering.py --mode=postprocess [å…¶ä»–å‚æ•°]
```
- **åŠŸèƒ½**: åå¤„ç†LLMæ¨ç†ç»“æœ
- **æ ¸å¿ƒå‡½æ•°**: `post_process()`
- **æµç¨‹**: æ¸…ç†JSONæ ¼å¼ï¼Œæå–ç±»åˆ«åç§°ï¼Œå»é‡å’Œæ ‡å‡†åŒ–
- **è¾“å‡º**: æ¸…ç†åçš„ç±»åˆ«åç§°åˆ—è¡¨

## å¿«æ…¢æ€è€ƒç³»ç»Ÿæ¨¡å¼

### 5. build_knowledge_baseæ¨¡å¼
```bash
python discovering.py --mode=build_knowledge_base --knowledge_base_dir=./kb [å…¶ä»–å‚æ•°]
```
- **åŠŸèƒ½**: æ„å»ºå¿«æ…¢æ€è€ƒç³»ç»Ÿçš„çŸ¥è¯†åº“
- **æµç¨‹**:
  1. åˆå§‹åŒ–FastSlowThinkingSystem
  2. åŠ è½½è®­ç»ƒæ ·æœ¬
  3. æ„å»ºå›¾åƒå’Œæ–‡æœ¬çŸ¥è¯†åº“
  4. ä¿å­˜åˆ°æŒ‡å®šç›®å½•
- **è¾“å‡º**: å®Œæ•´çš„çŸ¥è¯†åº“æ–‡ä»¶

### 6. classifyæ¨¡å¼
```bash
python discovering.py --mode=classify --query_image=./image.jpg --knowledge_base_dir=./kb
```
- **åŠŸèƒ½**: å¯¹å•å¼ å›¾åƒè¿›è¡Œå¿«æ…¢æ€è€ƒåˆ†ç±»
- **æµç¨‹**: åŠ è½½çŸ¥è¯†åº“ï¼Œåˆ†æå•å¼ å›¾åƒï¼Œè¿”å›åˆ†ç±»ç»“æœ
- **è¾“å‡º**: åˆ†ç±»ç»“æœã€ç½®ä¿¡åº¦ã€æ˜¯å¦ä½¿ç”¨æ…¢æ€è€ƒ

### 7. evaluateæ¨¡å¼
```bash
python discovering.py --mode=evaluate --test_data_dir=./test --knowledge_base_dir=./kb
```
- **åŠŸèƒ½**: åœ¨æµ‹è¯•æ•°æ®é›†ä¸Šè¯„ä¼°å¿«æ…¢æ€è€ƒç³»ç»Ÿ
- **æµç¨‹**: æ‰¹é‡å¤„ç†æµ‹è¯•å›¾åƒï¼Œç»Ÿè®¡å‡†ç¡®ç‡å’Œæ€è€ƒæ¨¡å¼æ¯”ä¾‹
- **è¾“å‡º**: è¯„ä¼°ç»“æœå’Œè¯¦ç»†ç»Ÿè®¡

### 8. fastonlyæ¨¡å¼
```bash
python discovering.py --mode=fastonly --test_data_dir=./test --knowledge_base_dir=./kb
```
- **åŠŸèƒ½**: ä»…ä½¿ç”¨å¿«æ€è€ƒè¿›è¡Œè¯„ä¼°
- **ç‰¹ç‚¹**: 
  - è·³è¿‡æ…¢æ€è€ƒæµç¨‹
  - ç»Ÿè®¡éœ€è¦/ä¸éœ€è¦æ…¢æ€è€ƒçš„æ­£ç¡®ç‡
- **è¾“å‡º**: å¿«æ€è€ƒå‡†ç¡®ç‡å’Œè§¦å‘æ…¢æ€è€ƒçš„ç»Ÿè®¡

### 9. slowonlyæ¨¡å¼
```bash
python discovering.py --mode=slowonly --test_data_dir=./test --knowledge_base_dir=./kb
```
- **åŠŸèƒ½**: ä»…ä½¿ç”¨æ…¢æ€è€ƒè¿›è¡Œè¯„ä¼°
- **æµç¨‹**: å…ˆæ‰§è¡Œå¿«æ€è€ƒè·å–è¾“å…¥ï¼Œå†æ‰§è¡Œæ…¢æ€è€ƒ
- **è¾“å‡º**: æ…¢æ€è€ƒå‡†ç¡®ç‡ç»Ÿè®¡

### 10. fast_slowæ¨¡å¼
```bash
python discovering.py --mode=fast_slow --test_data_dir=./test --knowledge_base_dir=./kb
```
- **åŠŸèƒ½**: ä½¿ç”¨å®Œæ•´å¿«æ…¢æ€è€ƒç³»ç»Ÿè¿›è¡Œè¯„ä¼°
- **æµç¨‹**: è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦è§¦å‘æ…¢æ€è€ƒï¼Œå®Œæ•´çš„å†³ç­–æµç¨‹
- **ç»Ÿè®¡æŒ‡æ ‡**:
  - æ€»ä½“å‡†ç¡®ç‡
  - å¿«æ€è€ƒå‡†ç¡®ç‡
  - æ…¢æ€è€ƒè§¦å‘æ¯”ä¾‹
  - æ…¢æ€è€ƒå‡†ç¡®ç‡

### 11. fast_slow_inferæ¨¡å¼
```bash
python discovering.py --mode=fast_slow_infer --test_data_dir=./test --knowledge_base_dir=./kb --infer_dir=./infer
```
- **åŠŸèƒ½**: æ‰§è¡Œå¿«æ…¢æ€è€ƒæ¨ç†å¹¶ä¿å­˜ä¸­é—´ç»“æœ
- **ç‰¹ç‚¹**: 
  - åˆ†ç¦»æ¨ç†å’Œåˆ†ç±»è¿‡ç¨‹
  - ä¿å­˜è¯¦ç»†çš„æ¨ç†æ•°æ®
  - æ”¯æŒåç»­åˆ†æå’Œè°ƒè¯•
- **è¾“å‡º**: JSONæ ¼å¼çš„æ¨ç†ç»“æœæ–‡ä»¶

### 12. fast_slow_classifyæ¨¡å¼
```bash
python discovering.py --mode=fast_slow_classify --infer_dir=./infer --classify_dir=./classify
```
- **åŠŸèƒ½**: ä»æ¨ç†ç»“æœæ‰§è¡Œåˆ†ç±»é€»è¾‘
- **æµç¨‹**:
  1. åŠ è½½æ¨ç†ç»“æœ
  2. æ‰§è¡Œå†³ç­–é€»è¾‘
  3. ç»Ÿè®¡åˆ†ç±»æŒ‡æ ‡
- **å†³ç­–è·¯å¾„**:
  - `fast_only`: ä»…å¿«æ€è€ƒ
  - `slow_consistent`: å¿«æ…¢æ€è€ƒä¸€è‡´
  - `final_arbitration`: å¿«æ…¢ä¸ä¸€è‡´éœ€è¦è£å†³
  - `mllm_judge`: MLLMä¸­é—´åˆ¤æ–­

## å¹¶è¡Œå¿«æ…¢æ€è€ƒåˆ†ç±»æ¨¡å¼

### 13. fast_classifyæ¨¡å¼
```bash
python discovering.py --mode=fast_classify --infer_dir=./infer --classify_dir=./classify
```
- **åŠŸèƒ½**: ä»…å¤„ç†ä¸éœ€è¦æ…¢æ€è€ƒçš„æ ·æœ¬ï¼Œæ‰§è¡Œå¿«æ€è€ƒåˆ†ç±»
- **ç‰¹ç‚¹**: 
  - è·³è¿‡MLLMæ¨¡å‹åŠ è½½ï¼ŒèŠ‚çœèµ„æº
  - åªå¤„ç† `need_slow_thinking=False` çš„æ ·æœ¬
  - æ”¯æŒMLLMä¸­é—´åˆ¤æ–­ç»“æœ
- **è¾“å‡º**: `fast_classification_results.json`
- **ç»Ÿè®¡æŒ‡æ ‡**: å¿«æ€è€ƒå‡†ç¡®ç‡å’Œæ ·æœ¬æ•°é‡

### 14. slow_classifyæ¨¡å¼
```bash
python discovering.py --mode=slow_classify --infer_dir=./infer --classify_dir=./classify
```
- **åŠŸèƒ½**: ä»…å¤„ç†éœ€è¦æ…¢æ€è€ƒçš„æ ·æœ¬ï¼Œæ‰§è¡Œæ…¢æ€è€ƒåˆ†ç±»
- **ç‰¹ç‚¹**:
  - æ™ºèƒ½æ£€æµ‹æ˜¯å¦éœ€è¦åŠ è½½MLLMï¼ˆæœ‰æ…¢æ€è€ƒæ ·æœ¬æ‰åŠ è½½ï¼‰
  - åªå¤„ç† `need_slow_thinking=True` çš„æ ·æœ¬
  - æ£€æŸ¥å¿«æ…¢ä¸€è‡´æ€§ï¼Œæ ‡è®°éœ€è¦ç»ˆç«¯å†³ç­–çš„æ ·æœ¬
- **è¾“å‡º**: `slow_classification_results.json`
- **å†³ç­–è·¯å¾„**:
  - `slow_consistent`: å¿«æ…¢æ€è€ƒä¸€è‡´
  - `need_terminal_decision`: å¿«æ…¢ä¸ä¸€è‡´ï¼Œéœ€è¦ç»ˆç«¯å†³ç­–

### 15. terminal_decisionæ¨¡å¼
```bash
python discovering.py --mode=terminal_decision --infer_dir=./infer --classify_dir=./classify
```
- **åŠŸèƒ½**: å¤„ç†å¿«æ…¢ä¸ä¸€è‡´çš„æ ·æœ¬ï¼Œæ‰§è¡Œæœ€ç»ˆå†³ç­–ï¼Œå¹¶æ•´åˆæ‰€æœ‰ç»“æœ
- **æµç¨‹**:
  1. åŠ è½½å¿«æ€è€ƒå’Œæ…¢æ€è€ƒåˆ†ç±»ç»“æœ
  2. è¯†åˆ«éœ€è¦ç»ˆç«¯å†³ç­–çš„æ ·æœ¬
  3. åˆå§‹åŒ–ç³»ç»Ÿå¹¶åŠ è½½çŸ¥è¯†åº“ï¼ˆä»…åœ¨éœ€è¦æ—¶ï¼‰
  4. è°ƒç”¨ `_final_decision` å‡½æ•°è¿›è¡Œèåˆå†³ç­–
  5. æ•´åˆæ‰€æœ‰ç»“æœå¹¶é‡æ–°è®¡ç®—ç»Ÿè®¡æŒ‡æ ‡
- **è¾“å‡º**: `terminal_decision_results.json`
- **ä¾èµ–**: éœ€è¦å…ˆè¿è¡Œ `fast_classify` å’Œ `slow_classify` æ¨¡å¼

## å¤šæ¨¡æ€å¢å¼ºåˆ†ç±»æ¨¡å¼

åŸºäºMultimodal Enhanced Classification (MEC) æ¡†æ¶çš„å¢å¼ºç‰ˆæœ¬ï¼Œé€šè¿‡[å›¾-æ–‡]å¯¹[å›¾-æ–‡]åŒ¹é…æå‡åˆ†ç±»æ€§èƒ½ã€‚

### 16. fast_classify_enhancedæ¨¡å¼
```bash
python discovering.py --mode=fast_classify_enhanced --infer_dir=./infer --classify_dir=./classify
```
- **åŠŸèƒ½**: å¿«æ€è€ƒä¸å¤šæ¨¡æ€å¢å¼ºåˆ†ç±»ç»“åˆï¼Œå¯¹ä¸éœ€è¦æ…¢æ€è€ƒçš„æ ·æœ¬è¿›è¡Œå¢å¼º
- **ç‰¹ç‚¹**:
  - è°ƒç”¨MECæ¡†æ¶çš„ `pre_extract.py` å’Œ `evaluate.py`
  - ä½¿ç”¨å¿«æ€è€ƒé¢„æµ‹ç»“æœæ„é€ æµ‹è¯•ç«¯æè¿°
  - ä»çŸ¥è¯†åº“è·å–Top-Kå€™é€‰ä½œä¸ºæ£€ç´¢ç«¯
  - è·³è¿‡MLLMåŠ è½½ï¼ŒèŠ‚çœèµ„æº
- **è¾“å‡º**: `fast_classification_results_enhanced.json`
- **å¢å¼ºç­–ç•¥**:
  - æµ‹è¯•ç«¯: `f"a photo of a {fast_pred}"`
  - æ£€ç´¢ç«¯: å¿«æ€è€ƒfused_results Top-5 + çŸ¥è¯†åº“æè¿°
  - MECå¤šè§†å›¾å¢å¼º + ç†µæƒé‡ + ç›¸ä¼¼åº¦åŒ¹é…

### 17. slow_classify_enhancedæ¨¡å¼
```bash
python discovering.py --mode=slow_classify_enhanced --infer_dir=./infer --classify_dir=./classify
```
- **åŠŸèƒ½**: æ…¢æ€è€ƒä¸å¤šæ¨¡æ€å¢å¼ºåˆ†ç±»ç»“åˆï¼Œä½¿ç”¨å®Œæ•´æ¨ç†æ–‡æœ¬è¿›è¡Œå¢å¼º
- **ç‰¹ç‚¹**:
  - ä»…å¤„ç† `need_slow_thinking=True` çš„æ ·æœ¬
  - ä½¿ç”¨æ…¢æ€è€ƒå®Œæ•´æ¨ç†æ–‡æœ¬ä½œä¸ºæè¿°ï¼ˆä¸æ‘˜è¦ï¼‰
  - æ£€ç´¢ç«¯ä½¿ç”¨æ…¢æ€è€ƒenhanced_resultså€™é€‰
  - æ™ºèƒ½æ£€æµ‹MECéœ€æ±‚ï¼ŒæŒ‰éœ€å¤„ç†
- **è¾“å‡º**: `slow_classification_results_enhanced.json`
- **å¢å¼ºç­–ç•¥**:
  - æµ‹è¯•ç«¯: æ…¢æ€è€ƒå®Œæ•´æ¨ç†æ–‡æœ¬ `slow_reasoning`
  - æ£€ç´¢ç«¯: æ…¢æ€è€ƒenhanced_results Top-5 + çŸ¥è¯†åº“æè¿°
  - ä¿æŒæ¨ç†å®Œæ•´æ€§ï¼Œä¸è¿›è¡Œæ–‡æœ¬å‹ç¼©

### 18. terminal_decision_enhancedæ¨¡å¼
```bash
python discovering.py --mode=terminal_decision_enhanced --infer_dir=./infer --classify_dir=./classify
```
- **åŠŸèƒ½**: å¤„ç†å¢å¼ºåçš„å¿«æ…¢æ€è€ƒç»“æœï¼Œæ‰§è¡Œæœ€ç»ˆèåˆå†³ç­–
- **æµç¨‹**:
  1. åŠ è½½å¢å¼ºå¿«æ€è€ƒå’Œæ…¢æ€è€ƒåˆ†ç±»ç»“æœ
  2. è¯†åˆ«éœ€è¦ç»ˆç«¯å†³ç­–çš„æ ·æœ¬ (`decision_path="need_terminal_decision"`)
  3. æ‰§è¡Œå¢å¼ºç‰ˆèåˆå†³ç­–ï¼ˆç½®ä¿¡åº¦åŠ æƒï¼‰
  4. æ•´åˆæ‰€æœ‰å¢å¼ºç»“æœå¹¶è®¡ç®—ç»Ÿè®¡æŒ‡æ ‡
- **è¾“å‡º**: `terminal_decision_results_enhanced.json`
- **ä¾èµ–**: éœ€è¦å…ˆè¿è¡Œ `fast_classify_enhanced` å’Œ `slow_classify_enhanced` æ¨¡å¼
- **èåˆç­–ç•¥**:
  - æ¯”è¾ƒå¢å¼ºåçš„å¿«æ…¢æ€è€ƒç½®ä¿¡åº¦
  - é€‰æ‹©ç½®ä¿¡åº¦æ›´é«˜çš„é¢„æµ‹ä½œä¸ºæœ€ç»ˆç»“æœ
  - è®°å½•å†³ç­–æ¥æºå’Œå¢å¼ºæ•ˆæœ

#### ä¸‰æ¡å†³ç­–è·¯å¾„çš„å…·ä½“é€»è¾‘

- `fast_only`ï¼ˆå¿«æ€è€ƒåˆ†ç±»ï¼‰
  - è§¦å‘æ¡ä»¶: `need_slow_thinking == False`ã€‚
  - é€»è¾‘:
    - è‹¥å­˜åœ¨ `mllm_judge_result` ä¸”å…¶ `need_slow_thinking == False`ï¼Œåˆ™ç›´æ¥é‡‡ç”¨è¯¥åˆ¤å®šï¼š
      - æœ€ç»ˆé¢„æµ‹: `final_prediction = mllm_judge_result["predicted_category"]`
      - ç½®ä¿¡åº¦: `final_confidence = mllm_judge_result["confidence"]`
      - å†³ç­–è·¯å¾„: `decision_path = "mllm_judge"`
    - å¦åˆ™ä½¿ç”¨å¿«æ€è€ƒè¾“å‡ºï¼š
      - æœ€ç»ˆé¢„æµ‹: `final_prediction = fast_result["predicted_category"]`
      - ç½®ä¿¡åº¦: `final_confidence = fast_result["confidence"]`
      - å†³ç­–è·¯å¾„: `decision_path = "fast_only"`
    - å…¶å®ƒæ ‡è®°: `used_slow_thinking = False`ï¼Œ`fast_slow_consistent = True`ã€‚

- `slow_consistent`ï¼ˆæ…¢æ€è€ƒåˆ†ç±»ï¼Œä¸”ä¸å¿«æ€è€ƒä¸€è‡´ï¼‰
  - è§¦å‘æ¡ä»¶: `need_slow_thinking == True`ï¼Œä¸”æ…¢æ€è€ƒå·²ç”Ÿæˆ `slow_result`ï¼Œå¹¶ä¸”å¿«æ…¢é¢„æµ‹ä¸€è‡´æˆ–åœ¨ç›¸ä¼¼åº¦é˜ˆå€¼å†…ã€‚
  - ä¸€è‡´æ€§åˆ¤å®š:
    - `fast_pred = fast_result.get("fused_top1", fast_result.get("predicted_category", "unknown"))`
    - `slow_pred = slow_result["predicted_category"]`
    - è‹¥ `fast_pred == slow_pred` æˆ– `is_similar(fast_pred, slow_pred, threshold=0.5) == True`ï¼Œè§†ä¸ºä¸€è‡´ã€‚
  - é€»è¾‘:
    - æœ€ç»ˆé¢„æµ‹: `final_prediction = slow_pred`
    - ç½®ä¿¡åº¦: `final_confidence = slow_result["confidence"]`
    - å†³ç­–è·¯å¾„: `decision_path = "slow_consistent"`
    - å…¶å®ƒæ ‡è®°: `used_slow_thinking = True`ï¼Œ`fast_slow_consistent = True`ã€‚

- `final_arbitration`ï¼ˆå¿«æ…¢ä¸ä¸€è‡´çš„è£å†³ï¼‰
  - è§¦å‘æ¡ä»¶: `need_slow_thinking == True` ä¸” `slow_result` å­˜åœ¨ï¼Œå¹¶ä¸” `fast_pred` ä¸ `slow_pred` ä¸ç›¸ç­‰ä¸” `is_similar(fast_pred, slow_pred, 0.5) == False`ã€‚
  - é€»è¾‘ï¼ˆå½“å‰å®ç°çš„é»˜è®¤ç­–ç•¥ï¼‰:
    - ç›´æ¥é‡‡ç”¨æ…¢æ€è€ƒç»“æœï¼š
      - æœ€ç»ˆé¢„æµ‹: `final_prediction = slow_pred`
      - ç½®ä¿¡åº¦: `final_confidence = slow_result["confidence"]`
      - å†³ç­–è·¯å¾„: `decision_path = "final_arbitration"`
    - å…¶å®ƒæ ‡è®°: `used_slow_thinking = True`ï¼Œ`fast_slow_consistent = False`ã€‚
  - å¤‡æ³¨: ä»£ç ä¸­é¢„ç•™äº†å¯é€‰çš„æœ€ç»ˆè£å†³æ¥å£ï¼ˆ`system.final_arbitration`ï¼‰ä½œä¸ºå¯æ›¿ä»£ç­–ç•¥ï¼Œä½†é»˜è®¤æœªå¯ç”¨ã€‚

ä»¥ä¸Šè·¯å¾„å‡ä¼šè¾“å‡ºç»Ÿä¸€çš„ç»“æœç»“æ„ï¼Œå¹¶åœ¨åç»­ç»Ÿè®¡ä¸­ç´¯è®¡ `correct/total`ã€`fast_only_correct`ã€`slow_triggered`ã€`slow_triggered_correct` ç­‰æŒ‡æ ‡ã€‚

#### æ¨¡å¼ç­‰ä»·æ€§ä¿è¯

ä¸ºç¡®ä¿ `fast_slow_infer + fast_slow_classify` ä¸ `fast_slow` æ¨¡å¼çš„ç­‰ä»·æ€§ï¼Œç³»ç»Ÿå·²å®ç°ä»¥ä¸‹å…³é”®ä¿®å¤ï¼š

1. **æœ€ç»ˆè£å†³é€»è¾‘ä¸€è‡´æ€§**: åœ¨ `final_arbitration` è·¯å¾„ä¸­ï¼Œ`fast_slow_classify` æ¨¡å¼ç°åœ¨è°ƒç”¨ä¸ `fast_slow` æ¨¡å¼ç›¸åŒçš„ `system._final_decision()` å‡½æ•°ï¼Œè€Œéç®€å•ä½¿ç”¨æ…¢æ€è€ƒç»“æœã€‚

2. **çŸ¥è¯†åº“åŠ è½½**: `fast_slow_classify` æ¨¡å¼ç°åœ¨è‡ªåŠ¨åŠ è½½çŸ¥è¯†åº“ï¼Œç¡®ä¿ `_final_decision` å‡½æ•°èƒ½å¤Ÿè®¿é—®å¿…è¦çš„æ£€ç´¢å’Œç»Ÿè®¡æ•°æ®ã€‚

3. **å†³ç­–è·¯å¾„å®Œå…¨å¯¹é½**: ä¸‰æ¡å†³ç­–è·¯å¾„çš„è§¦å‘æ¡ä»¶ã€å˜é‡è·å–æ–¹å¼ã€ä¸€è‡´æ€§åˆ¤å®šé€»è¾‘å‡ä¸ `classify_single_image` å‡½æ•°ä¿æŒä¸¥æ ¼ä¸€è‡´ã€‚

é€šè¿‡è¿™äº›ä¿®å¤ï¼Œä¸¤ç§æ¨¡å¼ç°åœ¨äº§ç”Ÿå®Œå…¨ç›¸åŒçš„åˆ†ç±»ç»“æœå’Œå‡†ç¡®ç‡ç»Ÿè®¡ã€‚

## å…³é”®é…ç½®å‚æ•°

### åŸºç¡€å‚æ•°
- `--config_file_env`: ç¯å¢ƒé…ç½®æ–‡ä»¶
- `--config_file_expt`: å®éªŒé…ç½®æ–‡ä»¶
- `--num_per_category`: æ¯ä¸ªç±»åˆ«çš„æ ·æœ¬æ•°é‡

### å¿«æ…¢æ€è€ƒç³»ç»Ÿå‚æ•°
- `--knowledge_base_dir`: çŸ¥è¯†åº“ç›®å½•
- `--query_image`: æŸ¥è¯¢å›¾åƒè·¯å¾„
- `--test_data_dir`: æµ‹è¯•æ•°æ®ç›®å½•
- `--results_out`: ç»“æœè¾“å‡ºè·¯å¾„
- `--use_slow_thinking`: å¼ºåˆ¶ä½¿ç”¨æ…¢æ€è€ƒ
- `--confidence_threshold`: å¿«æ€è€ƒç½®ä¿¡åº¦é˜ˆå€¼
- `--similarity_threshold`: ç›¸ä¼¼åº¦è§¦å‘é˜ˆå€¼
- `--enable_mllm_intermediate_judge`: å¯ç”¨MLLMä¸­é—´åˆ¤æ–­

### æ¨ç†åˆ†ç±»åˆ†ç¦»å‚æ•°
- `--infer_dir`: æ¨ç†ç»“æœä¿å­˜ç›®å½•
- `--classify_dir`: åˆ†ç±»ç»“æœä¿å­˜ç›®å½•

## æ•°æ®æµç¨‹å›¾

### ä¼ ç»Ÿæµç¨‹
```
è®­ç»ƒæ•°æ® â†’ describeæ¨¡å¼ â†’ guessæ¨¡å¼ â†’ postprocessæ¨¡å¼ â†’ å‘ç°çš„ç±»åˆ«
    â†“
æ„å»ºçŸ¥è¯†åº“ â†’ å¿«æ…¢æ€è€ƒç³»ç»Ÿ â†’ åˆ†ç±»/è¯„ä¼°
    â†“
æµ‹è¯•æ•°æ® â†’ inferæ¨¡å¼ â†’ classifyæ¨¡å¼ â†’ æœ€ç»ˆç»“æœ
```

### å¹¶è¡Œåˆ†ç±»æµç¨‹
```
æµ‹è¯•æ•°æ® â†’ fast_slow_inferæ¨¡å¼ â†’ æ¨ç†ç»“æœ
    â†“
å¹¶è¡Œæ‰§è¡Œ: fast_classifyæ¨¡å¼ + slow_classifyæ¨¡å¼
    â†“           â†“
å¿«æ€è€ƒç»“æœ   æ…¢æ€è€ƒç»“æœ
    â†“           â†“
    terminal_decisionæ¨¡å¼ â†’ æ•´åˆç»“æœ
```

### å¢å¼ºåˆ†ç±»æµç¨‹
```
æµ‹è¯•æ•°æ® â†’ fast_slow_inferæ¨¡å¼ â†’ æ¨ç†ç»“æœ
    â†“
å¹¶è¡Œæ‰§è¡Œ: fast_classify_enhancedæ¨¡å¼ + slow_classify_enhancedæ¨¡å¼
    â†“               â†“
å¢å¼ºå¿«æ€è€ƒç»“æœ   å¢å¼ºæ…¢æ€è€ƒç»“æœ
    â†“               â†“
    terminal_decision_enhancedæ¨¡å¼ â†’ æœ€ç»ˆå¢å¼ºç»“æœ
```

### æ¨¡å¼ç­‰ä»·æ€§å…³ç³»
```
fast_slow_classify â‰¡ fast_classify + slow_classify + terminal_decision
fast_slow â‰¡ fast_slow_infer + fast_slow_classify
terminal_decision_enhanced â‰¡ fast_classify_enhanced + slow_classify_enhanced + enhanced_fusion
```

## è°ƒè¯•å’Œå¼€å‘åŠŸèƒ½

### DEBUGæ¨¡å¼
- å…¨å±€å˜é‡`DEBUG = False`æ§åˆ¶è°ƒè¯•æ¨¡å¼
- å¯ç”¨æ—¶ä»…å¤„ç†å‰3ä¸ªæ ·æœ¬ï¼ŒåŠ é€Ÿå¼€å‘è°ƒè¯•

### é”™è¯¯å¤„ç†
- JSONè§£æå¼‚å¸¸å¤„ç†
- æ–‡ä»¶åŠ è½½å¼‚å¸¸å¤„ç†
- å›¾åƒå¤„ç†å¼‚å¸¸å¤„ç†
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è¾“å‡º

## æ€§èƒ½ä¼˜åŒ–

### å†…å­˜ä¼˜åŒ–
- MLLMå•ä¾‹æ¨¡å¼é¿å…é‡å¤åŠ è½½
- åˆ†æ‰¹å¤„ç†å¤§æ•°æ®é›†
- åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å˜é‡

### è®¡ç®—ä¼˜åŒ–
- æ”¯æŒGPU/CPUè‡ªé€‚åº”
- å‘é‡åŒ–æ“ä½œ
- ç¼“å­˜æœºåˆ¶

## ğŸ¯ **ç»Ÿä¸€ä½¿ç”¨æŒ‡å—**

### run_discovery.sh æ¨¡å¼é€‰æ‹©æŒ‡å—

#### ğŸ **å¿«é€Ÿå¼€å§‹**
```bash
# 1. ä¿®æ”¹é…ç½®æ–‡ä»¶
echo 'discovery_mode: "build_knowledge_base"' | sed -i 's/discovery_mode: ".*"/discovery_mode: "build_knowledge_base"/' config.yaml

# 2. è¿è¡Œè„šæœ¬
bash run_discovery.sh

# 3. æŸ¥çœ‹æ—¥å¿—
tail -f logs/discovery/dogXXX/discovery_dog_build_knowledge_base.log
```

#### ğŸ“Š **æ¨¡å¼é€‰æ‹©ç­–ç•¥**

| ä½¿ç”¨ç›®æ ‡ | æ¨èæ¨¡å¼ | config.yaml è®¾ç½® | è¯´æ˜ |
|---------|---------|-----------------|------|
| **é¦–æ¬¡ä½¿ç”¨** | `build_knowledge_base` | `discovery_mode: "build_knowledge_base"` | å¿…é¡»å…ˆæ„å»ºçŸ¥è¯†åº“ |
| **å¿«é€Ÿæµ‹è¯•** | `fastonly` | `discovery_mode: "fastonly"` | ä»…å¿«æ€è€ƒï¼Œæœ€å¿«å¾—åˆ°ç»“æœ |
| **æ ‡å‡†è¯„ä¼°** | `fast_slow` | `discovery_mode: "fast_slow"` | å®Œæ•´å¿«æ…¢æ€è€ƒç³»ç»Ÿ |
| **æ¶ˆèå®éªŒ** | `fast_slow_infer` â†’ `fast_slow_classify` | åˆ†ä¸¤æ­¥æ‰§è¡Œ | æ¨ç†ä¸åˆ†ç±»åˆ†ç¦» |
| **å¹¶è¡ŒåŠ é€Ÿ** | `fast_classify` + `slow_classify` â†’ `terminal_decision` | ä¸‰æ­¥å¹¶è¡Œæ‰§è¡Œ | æœ€å¤§åŒ–èµ„æºåˆ©ç”¨ |
| **æ€§èƒ½ä¼˜åŒ–** | `*_enhanced` ç³»åˆ— | å¢å¼ºç‰ˆæœ¬ | MECæ¡†æ¶å¢å¼º |
| **æ•°æ®æ¢ç´¢** | `identify` â†’ `describe` â†’ `guess` | VQAæµç¨‹ | æ–°æ•°æ®é›†å±æ€§å‘ç° |

#### ğŸ”„ **å®Œæ•´å·¥ä½œæµç¨‹**

##### æ–°æ•°æ®é›†å®Œæ•´æµç¨‹
```bash
# 1. æ•°æ®æ¢ç´¢
sed -i 's/discovery_mode: ".*"/discovery_mode: "identify"/' config.yaml && bash run_discovery.sh
sed -i 's/discovery_mode: ".*"/discovery_mode: "describe"/' config.yaml && bash run_discovery.sh  
sed -i 's/discovery_mode: ".*"/discovery_mode: "guess"/' config.yaml && bash run_discovery.sh
sed -i 's/discovery_mode: ".*"/discovery_mode: "postprocess"/' config.yaml && bash run_discovery.sh

# 2. æ„å»ºçŸ¥è¯†åº“
sed -i 's/discovery_mode: ".*"/discovery_mode: "build_knowledge_base"/' config.yaml && bash run_discovery.sh

# 3. æ ‡å‡†è¯„ä¼°
sed -i 's/discovery_mode: ".*"/discovery_mode: "fast_slow"/' config.yaml && bash run_discovery.sh
```

##### å¹¶è¡ŒåŠ é€Ÿæµç¨‹
```bash
# 1. æ„å»ºçŸ¥è¯†åº“ + æ¨ç†
sed -i 's/discovery_mode: ".*"/discovery_mode: "build_knowledge_base"/' config.yaml && bash run_discovery.sh
sed -i 's/discovery_mode: ".*"/discovery_mode: "fast_slow_infer"/' config.yaml && bash run_discovery.sh

# 2. å¹¶è¡Œåˆ†ç±»ï¼ˆå¯åœ¨ä¸åŒç»ˆç«¯åŒæ—¶è¿è¡Œï¼‰
sed -i 's/discovery_mode: ".*"/discovery_mode: "fast_classify"/' config.yaml && bash run_discovery.sh &
sed -i 's/discovery_mode: ".*"/discovery_mode: "slow_classify"/' config.yaml && bash run_discovery.sh &
wait

# 3. æœ€ç»ˆå†³ç­–
sed -i 's/discovery_mode: ".*"/discovery_mode: "terminal_decision"/' config.yaml && bash run_discovery.sh
```

##### å¢å¼ºæ€§èƒ½æµç¨‹
```bash
# 1. åŸºç¡€å‡†å¤‡
sed -i 's/discovery_mode: ".*"/discovery_mode: "build_knowledge_base"/' config.yaml && bash run_discovery.sh
sed -i 's/discovery_mode: ".*"/discovery_mode: "fast_slow_infer"/' config.yaml && bash run_discovery.sh

# 2. å¢å¼ºå¹¶è¡Œåˆ†ç±»
sed -i 's/discovery_mode: ".*"/discovery_mode: "fast_classify_enhanced"/' config.yaml && bash run_discovery.sh &
sed -i 's/discovery_mode: ".*"/discovery_mode: "slow_classify_enhanced"/' config.yaml && bash run_discovery.sh &
wait

# 3. å¢å¼ºå†³ç­–èåˆ
sed -i 's/discovery_mode: ".*"/discovery_mode: "terminal_decision_enhanced"/' config.yaml && bash run_discovery.sh
```

## ä½¿ç”¨å»ºè®®

### å¼€å‘å’Œè°ƒè¯•
1. **å¼€å‘é˜¶æ®µ**: å¯ç”¨DEBUGæ¨¡å¼ï¼Œä½¿ç”¨å°æ•°æ®é›†éªŒè¯æµç¨‹
2. **è°ƒè¯•é˜¶æ®µ**: ä½¿ç”¨ `fast_slow_infer` + `fast_slow_classify` åˆ†ç¦»æ¨¡å¼ï¼Œä¾¿äºè°ƒè¯•å’Œåˆ†æ
3. **å¹¶è¡Œè°ƒè¯•**: ä½¿ç”¨ `fast_classify + slow_classify + terminal_decision`ï¼Œå¯ç‹¬ç«‹è°ƒè¯•å„éƒ¨åˆ†é€»è¾‘
4. **ç»Ÿä¸€è¿è¡Œ**: å§‹ç»ˆä½¿ç”¨ `run_discovery.sh` è€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ `discovering.py`

### å®éªŒå’Œè¯„ä¼°
5. **å¿«é€Ÿå®éªŒ**: ä½¿ç”¨ `fast_classify` æ¨¡å¼å¿«é€Ÿè¯„ä¼°å¿«æ€è€ƒæ€§èƒ½
6. **æ…¢æ€è€ƒåˆ†æ**: ä½¿ç”¨ `slow_classify` æ¨¡å¼ä¸“é—¨åˆ†ææ…¢æ€è€ƒæ•ˆæœ
7. **å®Œæ•´è¯„ä¼°**: ä½¿ç”¨ `fast_slow` æ¨¡å¼è·å–æœ€ç»ˆæ€§èƒ½åŸºå‡†
8. **å‚æ•°è°ƒä¼˜**: é€šè¿‡ä¿®æ”¹ `config.yaml` å¿«é€Ÿåˆ‡æ¢æ•°æ®é›†å’Œè¶…å‚æ•°

### ç”Ÿäº§å’Œéƒ¨ç½²
9. **å•å¼ åˆ†ç±»**: ä½¿ç”¨ `classify` æ¨¡å¼å¤„ç†å•å¼ å›¾åƒï¼ˆéœ€æ‰‹åŠ¨æŒ‡å®šå›¾åƒè·¯å¾„ï¼‰
10. **æ‰¹é‡å¤„ç†**: æ ¹æ®èµ„æºæƒ…å†µé€‰æ‹©åˆé€‚çš„å¹¶è¡Œåº¦
11. **èµ„æºç®¡ç†**: é€šè¿‡ `config.yaml` ç»Ÿä¸€ç®¡ç†GPUåˆ†é…

### å¹¶è¡Œæ‰§è¡Œå»ºè®®
- `fast_classify` å’Œ `slow_classify` å¯ä»¥çœŸæ­£å¹¶è¡Œæ‰§è¡Œï¼ˆä¸åŒGPU/è¿›ç¨‹ï¼‰
- `terminal_decision` å¿…é¡»åœ¨å‰ä¸¤è€…å®Œæˆåæ‰§è¡Œ
- é€‚ç”¨åœºæ™¯ï¼šå¤§è§„æ¨¡æ•°æ®é›†ã€èµ„æºå……è¶³ã€éœ€è¦åˆ†æå„ç»„ä»¶æ€§èƒ½
- **æ–°å¢**: é€šè¿‡ `run_discovery.sh` è‡ªåŠ¨æ£€æŸ¥ä¾èµ–å…³ç³»

### å¤šæ¨¡æ€å¢å¼ºå»ºè®®
12. **å¢å¼ºå®éªŒ**: ä½¿ç”¨ `fast_classify_enhanced` å’Œ `slow_classify_enhanced` è¯„ä¼°MECæ¡†æ¶æ•ˆæœ
13. **æ€§èƒ½å¯¹æ¯”**: è¿è¡ŒåŸç‰ˆå’Œå¢å¼ºç‰ˆæ¨¡å¼ï¼Œå¯¹æ¯” `enhancement_rate` æŒ‡æ ‡
14. **èµ„æºæƒè¡¡**: å¢å¼ºæ¨¡å¼éœ€è¦æ›´å¤šè®¡ç®—èµ„æºï¼Œé€‚åˆç¦»çº¿è¯„ä¼°å’Œå…³é”®æ ·æœ¬å¤„ç†
15. **å¹¶è¡Œå¢å¼º**: `fast_classify_enhanced` å’Œ `slow_classify_enhanced` å¯å¹¶è¡Œæ‰§è¡Œ

### ğŸš€ **æœ€ä½³å®è·µ**
1. **é…ç½®ç®¡ç†**: ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç®¡ç†ä¸åŒçš„ `config.yaml` é…ç½®
2. **æ—¥å¿—ç›‘æ§**: åˆ©ç”¨ç»Ÿä¸€çš„æ—¥å¿—ç³»ç»Ÿè·Ÿè¸ªå®éªŒè¿›åº¦
3. **ç»“æœå¤‡ä»½**: å®šæœŸå¤‡ä»½ `experiments/` ç›®å½•ä¸‹çš„ç»“æœ
4. **æ¨¡å¼éªŒè¯**: åœ¨åˆ‡æ¢æ¨¡å¼å‰å…ˆæ£€æŸ¥ä¾èµ–å…³ç³»
5. **èµ„æºä¼˜åŒ–**: æ ¹æ®GPUå†…å­˜é€‰æ‹©åˆé€‚çš„æ‰¹å¤„ç†å¤§å°

## æ‰©å±•æ€§

è¯¥ç³»ç»Ÿè®¾è®¡å…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ï¼š
- æ–°çš„æ€è€ƒæ¨¡å¼å¯ä»¥é€šè¿‡æ·»åŠ æ–°çš„modeè½»æ¾é›†æˆ
- æ”¯æŒè‡ªå®šä¹‰å†³ç­–ç­–ç•¥
- å¯é…ç½®çš„é˜ˆå€¼å’Œå‚æ•°
- æ¨¡å—åŒ–çš„ç»„ä»¶è®¾è®¡

### å¤šæ¨¡æ€å¢å¼ºæ‰©å±•
- **MECé›†æˆ**: é€šè¿‡subprocessè°ƒç”¨å¤–éƒ¨MECæ¡†æ¶ï¼Œä¿æŒæ¨¡å—è§£è€¦
- **å¢å¼ºç­–ç•¥**: æ”¯æŒå¤šç§æ–‡æœ¬æè¿°æ„é€ å’Œæ£€ç´¢å€™é€‰é€‰æ‹©ç­–ç•¥
- **ç¼“å­˜æœºåˆ¶**: å¤ç”¨MECçš„ç‰¹å¾æå–å’Œå­˜å‚¨æœºåˆ¶
- **é”™è¯¯æ¢å¤**: å¢å¼ºå¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ°åŸå§‹æ–¹æ³•
- **ç»Ÿè®¡æ‰©å±•**: å®Œæ•´çš„å¢å¼ºæ•ˆæœè¯„ä¼°æŒ‡æ ‡

### æœªæ¥æ‰©å±•æ–¹å‘
- æ›´å¤šå¢å¼ºç­–ç•¥ï¼ˆå¦‚å›¾åƒå¢å¼ºã€æ–‡æœ¬æ‘˜è¦ã€å¤šæ¨¡æ€èåˆï¼‰
- åŠ¨æ€MECå‚æ•°è°ƒä¼˜
- åˆ†å¸ƒå¼å¢å¼ºå¤„ç†
- å®æ—¶å¢å¼ºåˆ†ç±»æ¥å£
